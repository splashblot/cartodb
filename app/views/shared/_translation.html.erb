<% if Cartodb.config[:translation].present? %>
  <script type="text/javascript">
    window.addEventListener("i18nTranslateReady", function(e){
            var cdb_lang_file = JSON.parse($('#___cdb_lang_file').val());
            $.i18n.load(cdb_lang_file); // Sets the lookup language file
            i18nTranslate.translate(); // initial translate when the webpage first loads.
        });

    window.addEventListener("i18nTranslateShow", function(e){
            i18nTranslate.translate(); // initial translate when the webpage first loads.
        });

//    setInterval(function() {
//        i18nTranslate.translate();
//    }, 1000);

  </script>
  <%= javascript_include_tag 'jquery-2.1.4.min.js', 'jquery.i18n.min.js', 'i18n-cdb-translate.js' %>
  <%= javascript_include_tag 'languages/es.i18n.js' %>
<% end %>